# Event Handling Examples

This section demonstrates ForGE Qt's event-driven programming model, including signals/slots, custom events, and event processing patterns.

## Signals and Slots

ForGE Qt's primary communication mechanism between objects:

```fortran
type(forge_button) :: button
type(forge_label) :: label

! Connect button click to label update
call button%on_clicked(update_label_text)

contains
    subroutine update_label_text(event)
        type(forge_event), intent(in) :: event
        call label%set_text("Button was clicked!")
    end subroutine update_label_text
```

## Event Types

### Mouse Events

**File:** `examples/event_mouse_events/event_mouse_events.f90`

Demonstrates:
- Mouse button presses and releases
- Mouse movement tracking
- Double-click detection
- Mouse wheel events
- Coordinate systems

### Keyboard Events

**File:** `examples/event_keyboard_events/event_keyboard_events.f90`

Demonstrates:
- Key press and release events
- Modifier key handling (Ctrl, Alt, Shift)
- Special key detection
- Text input events
- Key combinations

### Custom Events

**File:** `examples/event_custom_events/event_custom_events.f90`

Demonstrates:
- Defining custom event types
- Posting events to event queue
- Event filtering and processing
- Inter-object communication

### Event Filters

**File:** `examples/event_event_filters/event_event_filters.f90`

Demonstrates:
- Installing event filters on objects
- Intercepting events before delivery
- Modifying or discarding events
- Event monitoring and logging

### Asynchronous Events

**File:** `examples/event_async_events/event_async_events.f90`

Demonstrates:
- Posting events from worker threads
- Cross-thread communication
- Event queue management
- Thread-safe event handling

### Timer Events

**File:** `examples/event_timer_events/event_timer_events.f90`

Demonstrates:
- Single-shot and repeating timers
- Timer precision and accuracy
- Timer event processing
- Animation and periodic updates

### Focus Events

**File:** `examples/event_focus_events/event_focus_events.f90`

Demonstrates:
- Focus gain and loss
- Tab order management
- Keyboard focus navigation
- Focus event handling

### Paint Events

**File:** `examples/event_paint_events/event_paint_events.f90`

Demonstrates:
- Custom widget painting
- Graphics context management
- Paint event optimization
- Drawing primitives

### Resize Events

**File:** `examples/event_resize_events/event_resize_events.f90`

Demonstrates:
- Window and widget resizing
- Layout recalculation
- Size constraint handling
- Responsive design

## Event Processing Architecture

ForGE Qt uses an event-driven architecture where:

1. **Events** are generated by user actions, system notifications, or program logic
2. **Event Queue** manages event delivery order
3. **Event Loop** processes events sequentially
4. **Event Handlers** respond to specific event types

## Signal-Slot Connections

### Direct Connection
```fortran
call sender%signal_name%connect(receiver%slot_name)
```

### Queued Connection (Thread-Safe)
```fortran
call sender%signal_name%connect(receiver%slot_name, QUEUED_CONNECTION)
```

### Automatic Connection
```fortran
call button%on_clicked(my_handler)  ! Automatic direct connection
```

## Event Propagation

Events propagate through the widget hierarchy:

1. **Child widgets** receive events first
2. **Parent widgets** can intercept if not handled
3. **Application level** final processing opportunity

## Custom Event Creation

```fortran
type, extends(forge_event) :: my_custom_event
    integer :: custom_data
end type my_custom_event

! Post custom event
type(my_custom_event) :: event
event%custom_data = 42
call forge_app%post_event(receiver, event)
```

## Event Filtering

```fortran
type(my_event_filter) :: filter
call target%install_event_filter(filter)

! Filter implementation
function my_event_filter%event_filter(obj, event) result(handled)
    if (event%type == MY_CUSTOM_EVENT) then
        ! Handle or modify event
        handled = .true.
    else
        handled = .false.  ! Let event continue
    end if
end function
```

## Performance Considerations

1. **Event Compression:** Similar events may be merged
2. **Lazy Evaluation:** Events processed only when needed
3. **Thread Affinity:** Events respect thread boundaries
4. **Memory Management:** Automatic cleanup of event objects

## Running Event Examples

```bash
# Build and run event handling examples
cmake --build build --target event_mouse_events
./build/examples/event_mouse_events/event_mouse_events

# Test signal-slot connections
cmake --build build --target event_basic_signals
./build/examples/event_basic_signals/event_basic_signals
```

## Event Categories

| Category | Examples | Purpose |
|----------|----------|---------|
| **User Input** | Mouse, Keyboard | User interaction |
| **System** | Timer, Focus, Resize | System notifications |
| **Custom** | Custom Events | Application logic |
| **Communication** | Signals/Slots | Object interaction |
| **Processing** | Filters, Async | Event management |

These examples provide comprehensive coverage of ForGE Qt's event system, enabling responsive and interactive applications.